---
sidebar_position: 1
---

# v1.0

### Структура в нотации классов
```java
class BuildingJson {
    String NameBuilding; // общее название здания
    AddressClass Address; // структура с адресными данными
    LevelClass[] Level; // массив этажей/уровней здания
    
    class AddressClass {
        String StreetAddress; // улица, дом
        String City; // город
        String AddInfo; // доп. информация
    }
    
    class LevelClass {
        String NameLevel; // название уровня(например, 3 этаж)
        double ZLevel; // высота уровня над землей, м
        BuildElementClass[] BuildElement; // массив помещений на данном этаже
    }
    
    class BuildElementClass {
        String Name; // название помещения
        String Id; // UUID уникальный ID
        String Sign; // тип помещения (комната, дверь и т.п.)
        double SizeZ; // высота потолка
        double Width; // ширина дверей и проемов
        int Type; // тип помещения по пожарной нагрузке
        int NumPeople; // число людей в момещении
        int SignScenario; // если > 0, то в помещении возгорание
        Stirng Note; // доп. информация
        String[] Output; // ссылки (UUID) на связанные помещения
        double[][][] XY; // геометрия - [кольца][точки][0,1]
    }
}
```

Помещениями могут быть как комнаты с коридорами, так и двери, и лестничные клетки.
Каждое помещение связано с другими: команата <-> дверь <-> коридор и т.п.
Связь отражается в поле Output.  

BuildElementClass.Sign = { Room, Staircase, Outside, DoorWayOut, DoorWayInt, DoorWay } =
{ Помещение, Лестница, Нерасчетная область, Дверной проем(выход из здания), Дверной проем, Проем }  

BuildElementClass.XY - геометрия полигона помещения, т.е. массив колец(первое - внешнее кольцо, остальные внутренние).
Каждое кольцо состоит из массива точек (x,y), причем последняя точка повторяет первую(замыкает).
Каждая точка - массив из двух чисел x,y - \[0,1]. Таким образом, XY = \[кольца]\[точки]\[0,1].

![Polygon geometry example](/img/polygon-geometry.png)  
*Пример полигона, состоящего изтрех колец. Внутренние кольца представляют собой непроходимые участки.*

BuildElementClass.Type - характеристика элемента здания по пожарной нагрузке:

| Type                                                                        | Code |
|:----------------------------------------------------------------------------|:----:|
| Жилые помещения гостиниц, общежитий и т.д.                                  |  1   |
| Столовая, буфет, зал ресторана                                              |  2   |
| Зал театра, кинотеатра, клуба, цирка                                        |  3   |
| Гардероб                                                                    |  4   |
| Хранилища библиотек, архивы                                                 |  5   |
| Музеи, выставки                                                             |  6   |
| Подсобные и бытовые помещения, лестничная клетка                            |  7   |
| Административные помещения, учебные классы школ, ВУЗов, кабинеты поликлиник |  8   |
| Магазины                                                                    |  9   |
| Зал вокзала                                                                 |  10  |
| Стоянки легковых автомобилей                                                |  11  |
| Стоянки легковых автомобилей (с двухуровневым хранением)                    |  12  |
| Стадионы                                                                    |  13  |
| Спортзалы                                                                   |  14  |
| Торговый зал гипермаркета                                                   |  15  |

Пример части ПИМ здания, сохраненного в формате JSON:
```json
{
  "NameBuilding": "4 corps UdSU",
  "Level": [
    {
      "NameLevel": "ground floor",
      "ZLevel": 0.0,
      "BuildElement": [
        {
          "Name": "Exit (00 : 6ead) d97d<−>",
          "SizeZ ": 2.0,
          "Sign": "DoorWayOut",
          "Width": 1.0,
          "XY": [
            [
              [
                -0.14281202818147243,
                12.0529101723906
              ],
              [
                0.9200439769442212,
                12.0529101723906
              ],
              [
                0.9200439769442212,
                11.0529101723906
              ],
              [
                -0.14281202818147104,
                11.0529101723906
              ],
              [
                -0.14281202818147243,
                12.0529101723906
              ]
            ]
          ],
          "Output": [
            "{496e4642−c94b−4b5d−b837−1133b11ed97d}"
          ],
          "Id": "{a29e1da1−decb−4889−a2f1−b61c60106ead}"
        },
        {
          "Name": "Staircase (00 : d97d)",
          "SignScenario": 0,
          "SizeZ": 2.5,
          "Sign": "Staircase",
          "XY": [
            [
              [
                0.8057356717390949,
                16.516667636558235
              ],
              [
                3.7071756950255383,
                16.516667636558235
              ],
              [
                3.7071756950255406,
                10.546393688874598
              ],
              [
                0.8057356717390931,
                10.546393688874602
              ],
              [
                0.8057356717390949,
                16.516667636558235
              ]
            ]
          ],
          "NumPeople": 0,
          "Output": [
            "{a29e1da1−decb−4889−a2f1−b61c60106ead}",
            "{5cd50739−f3af−4ebf−9744−0b7ffcd27875}"
          ],
          "Type": 7,
          "Id": "{496e4642−c94b−4b5d−b837−1133b11ed97d}"
        }
      ]
    }
  ]
}
```
